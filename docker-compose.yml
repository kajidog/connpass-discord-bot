services:
  bot:
    build: .
    environment:
      DISCORD_BOT_TOKEN: ${DISCORD_BOT_TOKEN}
      DISCORD_APPLICATION_ID: ${DISCORD_APPLICATION_ID}
      CONNPASS_API_KEY: ${CONNPASS_API_KEY}
      OPENAI_API_KEY: ${OPENAI_API_KEY}
      ENABLE_AI_AGENT: ${ENABLE_AI_AGENT:-true}
      JOB_STORE_DIR: /data
      AGENT_DATABASE_URL: file:/data/agent-memory.db
    volumes:
      - bot-data:/data
      - ./apps:/app/apps
      - ./packages:/app/packages
      - /app/apps/discord-bot/node_modules
      - /app/apps/ai-agent/node_modules
    restart: unless-stopped

volumes:
  bot-data:
